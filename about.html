<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contact ‚Äì MAATRAM ON</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            maatramGreen: "#2e7d32",
            maatramDark: "#1b5e20"
          }
        }
      }
    }
  </script>

  <style>
    .glass {
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
    }

    /* Success Popup Animation */
    #successPopup {
      animation: popupScale 0.35s ease-out;
    }

    @keyframes popupScale {
      0% { transform: scale(0.7); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
  </style>
</head>

<body class="bg-slate-900 text-white min-h-screen">

  <!-- NAVBAR -->
  <header class="fixed top-0 left-0 right-0 bg-slate-900/70 backdrop-blur-md z-50">
    <nav class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
      <a href="index.html" class="flex items-center gap-3">
        <img src="logo.jpeg" class="w-10 h-10 rounded-full border border-white/20">
        <span class="font-bold text-lg">MAATRAM ON</span>
      </a>

      <div class="hidden md:flex gap-6 text-sm">
        <a href="index.html" class="hover:text-green-300">Home</a>
        <a href="about.html" class="hover:text-green-300">About</a>
        <a href="projects.html" class="hover:text-green-300">Projects</a>
        <a href="contact.html" class="text-green-300">Contact</a>
      </div>
    </nav>
  </header>

  <!-- HERO -->
  <section class="pt-32 pb-12 text-center px-6">
    <h1 class="text-4xl sm:text-5xl font-bold text-green-300">üìû Contact MAATRAM ON</h1>
    <p class="text-slate-300 mt-3 max-w-2xl mx-auto">
      Send us your message, attach images, and find us on the map below.  
      All messages are delivered directly to our **Discord server**.
    </p>
  </section>

  <!-- CONTACT FORM -->
  <section class="max-w-4xl mx-auto px-6 pb-16">
    <div class="glass p-10 rounded-2xl shadow-xl">

      <h2 class="text-2xl font-bold text-green-200 mb-6">Send Us a Message</h2>

      <form id="contactForm" class="space-y-5">

        <input id="name" required type="text" placeholder="Full Name" class="w-full p-3 rounded-lg glass">
        <input id="email" required type="email" placeholder="Email Address" class="w-full p-3 rounded-lg glass">
        <input id="phone" type="text" placeholder="Phone Number" class="w-full p-3 rounded-lg glass">

        <textarea id="message" required rows="5" placeholder="Your Message"
          class="w-full p-3 rounded-lg glass"></textarea>

        <!-- Attachments -->
        <label class="block text-sm text-green-200">Upload Images (optional)</label>
        <input id="fileUpload" type="file" accept="image/*" multiple
          class="w-full p-3 rounded-lg bg-slate-800 border border-white/10 text-sm">

        <button id="submitBtn" type="submit"
          class="w-full py-3 bg-maatramGreen hover:bg-maatramDark rounded-full font-semibold text-white">
          Send to Discord
        </button>

      </form>

      <!-- Cooldown -->
      <p id="cooldownMsg" class="text-center text-red-400 text-sm mt-3 hidden"></p>

    </div>
  </section>

  <!-- GOOGLE MAP -->
  <section class="max-w-4xl mx-auto px-6 pb-20">
    <h2 class="text-2xl font-bold text-green-200 mb-4 text-center">üìç Our Location</h2>

    <div class="glass rounded-2xl overflow-hidden shadow-lg">
      <iframe
        width="100%"
        height="350"
        style="border:0; filter:brightness(0.8)"
        loading="lazy"
        allowfullscreen
        src="https://www.google.com/maps/embed/v1/place?key=YOUR_GOOGLE_API_KEY&q=Coimbatore,Tamil+Nadu">
      </iframe>
    </div>

    <p class="text-center text-slate-400 mt-3 text-sm">Replace with your real location + Google Maps API key.</p>
  </section>

  <!-- SUCCESS POPUP -->
  <div id="successPopup" class="fixed inset-0 bg-black/70 hidden items-center justify-center z-50">
    <div class="bg-slate-800 p-8 rounded-2xl shadow-xl text-center max-w-sm w-full">
      <h3 class="text-2xl font-bold text-green-300">‚úî Message Sent!</h3>
      <p class="text-slate-300 mt-2">We received your message on Discord.</p>
      <button onclick="closePopup()"
        class="mt-6 px-6 py-2 bg-maatramGreen hover:bg-maatramDark rounded-full">
        OK
      </button>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="py-6 text-center text-slate-400 border-t border-white/10">
    ¬© 2025 MAATRAM ON ‚Äî Environmental Trust
  </footer>

  <!-- SCRIPT -->
  <script>
    const WEBHOOK_URL = "YOUR_DISCORD_WEBHOOK_URL"; // REQUIRED
    let cooldown = false;

    document.getElementById("contactForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      if (cooldown) return;

      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const message = document.getElementById("message").value.trim();
      const files = document.getElementById("fileUpload").files;

      // Cooldown Start
      cooldown = true;
      document.getElementById("submitBtn").disabled = true;
      document.getElementById("cooldownMsg").innerText = "Please wait 10 seconds before sending again...";
      document.getElementById("cooldownMsg").classList.remove("hidden");

      // 10s cooldown
      setTimeout(() => {
        cooldown = false;
        document.getElementById("submitBtn").disabled = false;
        document.getElementById("cooldownMsg").classList.add("hidden");
      }, 10000);

      // Format fields
      const embed = {
        title: "üåø New Contact Submission",
        color: 5763719,
        fields: [
          { name: "üë§ Name", value: name },
          { name: "üìß Email", value: email },
          { name: "üì± Phone", value: phone || "Not Provided" },
          { name: "üí¨ Message", value: message }
        ],
        timestamp: new Date()
      };

      // Create form data for attachments
      const formData = new FormData();
      formData.append("payload_json", JSON.stringify({
        username: "MAATRAM ON Web Contact",
        embeds: [embed]
      }));

      for (let i = 0; i < files.length; i++) {
        formData.append(`file${i}`, files[i]);
      }

      // Send to Discord
      try {
        await fetch(WEBHOOK_URL, { method: "POST", body: formData });
        showPopup();
        e.target.reset();
      } catch (err) {
        alert("Failed to send the message.");
      }
    });

    function showPopup() {
      document.getElementById("successPopup").style.display = "flex";
    }
    function closePopup() {
      document.getElementById("successPopup").style.display = "none";
    }
  </script>

</body>
</html>
